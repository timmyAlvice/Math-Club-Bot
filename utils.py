import os, re
# import os, requests, aiohttp
# from pydantic import BaseModel, parse_obj_as
# from typing import List, Dict, Tuple
# from aiogram import types

# TOKEN = os.getenv("GPN_CHATBOT_TOKEN")

WELCOME_MESSAGE = """–ü—Ä–∏–≤–µ—Ç! 
–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Math Club 

–°–∫–æ—Ä–æ —Ç—ã –ø–æ–π–º—ë—à—å, —á—Ç–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —ç–∫–∑–∞–º–µ–Ω–∞–º –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–µ—Å—ë–ª–æ–π –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π!
–í—ã–±–µ—Ä–∏ —Ä–µ–∂–∏–º, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å:"""


ERROR_MESSAGE = "–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫..."


TEMPLATE = """–°–û–í–ï–¢–´:

1. –°–æ–≤–µ—Ç 1
2. –°–æ–≤–µ—Ç 2
3. –°–æ–≤–µ—Ç 3
{hints}

==========

–ü–æ—Ö–æ–∂–∏–µ –∑–∞–¥–∞—á–∏:

1. –ó–∞–¥–∞—á–∞ 1
2. –ó–∞–¥–∞—á–∞ 2
3. –ó–∞–¥–∞—á–∞ 3
{similar_tasks}

==========

–≠—Ç–∞–ª–æ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:

–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
{solving}"""


PROBLEM_MODE_MESSAGE = """–ö–∞–∂–¥–æ–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ—à—ë–Ω–Ω–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–∞—ë—Ç —Ç–µ–±–µ 100 –æ—á–∫–æ–≤
–¢–µ–±–µ –Ω—É–∂–Ω–æ –Ω–∞–±—Ä–∞—Ç—å 500, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç –ø–æ —Ç–µ–º–µ
–£–¥–∞—á–∏!"""


TEST_MODE_MESSAGE = """–ß—Ç–æ–±—ã –ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç —Ç–µ–±–µ –Ω—É–∂–Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç—å –≤–µ—Ä–Ω–æ –Ω–∞ 7 –∏–∑ 10 –≤–æ–ø—Ä–æ—Å–æ–≤
–£–¥–∞—á–∏!"""


PROFILE_MODE_MESSAGE = """{name}

–£—Ä–æ–≤–µ–Ω—å üí™: –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –Ω—É–±–∏–∫
–û—á–∫–∏ üéØ: 1200
–î–Ω–µ–π –¥–æ –ï–ì–≠ üìÖ: 150

–ü—Ä–æ–π–¥–µ–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è ‚úçüèª:
1. –ü–ª–∞–Ω–∏–º–µ—Ç—Ä–∏—è üî≤
2. –í–µ–∫—Ç–æ—Ä—ã üî≤
3. –°—Ç–µ—Ä–µ–æ–º–µ—Ç—Ä–∏—è üî≤
4. –ù–∞—á–∞–ª–∞ —Ç–µ–æ—Ä–∏–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ üî≤
5. –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —Å–ª–æ–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π üî≤
6. –ü—Ä–æ—Å—Ç–µ–π—à–∏–µ —É—Ä–∞–≤–Ω–µ–Ω–∏—è üî≤
7. –í—ã—á–∏—Å–ª–µ–Ω–∏—è –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è üî≤
8. –ü—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è –∏ –ø–µ—Ä–≤–æ–æ–±—Ä–∞–∑–Ω–∞—è üî≤
9. –ó–∞–¥–∞—á–∏ —Å –ø—Ä–∏–∫–ª–∞–¥–Ω—ã–º —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º üî≤
10. –¢–µ–∫—Å—Ç–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ üî≤
11. –ì—Ä–∞—Ñ–∏–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π üî≤
12. –ù–∞–∏–±–æ–ª—å—à–µ–µ –∏ –Ω–∞–∏–º–µ–Ω—å—à–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π ‚úÖ

–î–æ—Å—Ç–∏–∂–∞–Ω–∏—è ‚≠ê:
–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ 1
–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ 2
–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ 3"""


INFO_MODE_MESSAGE = """–ì–∞–π–¥ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é"""
ABOUT_MESSAGE = """–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ –∏ –∞–≤—Ç–æ—Ä–∞—Ö"""


CHOOSE_TASK_MESSAGE = """–í—ã–±–µ—Ä–∏ –Ω–æ–º–µ—Ä –∑–∞–¥–∞–Ω–∏—è:
1. –ü–ª–∞–Ω–∏–º–µ—Ç—Ä–∏—è
2. –í–µ–∫—Ç–æ—Ä—ã
3. –°—Ç–µ—Ä–µ–æ–º–µ—Ç—Ä–∏—è
4. –ù–∞—á–∞–ª–∞ —Ç–µ–æ—Ä–∏–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏
5. –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —Å–ª–æ–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
6. –ü—Ä–æ—Å—Ç–µ–π—à–∏–µ —É—Ä–∞–≤–Ω–µ–Ω–∏—è
7. –í—ã—á–∏—Å–ª–µ–Ω–∏—è –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
8. –ü—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è –∏ –ø–µ—Ä–≤–æ–æ–±—Ä–∞–∑–Ω–∞—è
9. –ó–∞–¥–∞—á–∏ —Å –ø—Ä–∏–∫–ª–∞–¥–Ω—ã–º —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º
10. –¢–µ–∫—Å—Ç–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
11. –ì—Ä–∞—Ñ–∏–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π
12. –ù–∞–∏–±–æ–ª—å—à–µ–µ –∏ –Ω–∞–∏–º–µ–Ω—å—à–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π
"""

SYS_PROMPT = """
–¢—ã —É—á–∏—Ç–µ–ª—å –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏.
–¢–µ–±–µ –Ω—É–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ —Ç–≤–æ–µ–≥–æ —É—á–µ–Ω–∏–∫–∞ —Å —ç—Ç–∞–ª–æ–Ω–Ω—ã–º.
–£–∫–∞–∂–∏ –Ω–∞ –æ—à–∏–±–∫–∏, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å. –ï—Å–ª–∏ —Ä–µ—à–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å–æ–ø–æ—Å—Ç–∞–≤—å —Ç–æ–ª—å–∫–æ –æ—Ç–≤–µ—Ç, –Ω–∏—á–µ–≥–æ –Ω–µ –ø–∏—à–∏ –ø—Ä–æ —Ä–µ—à–µ–Ω–∏–µ.
–ê —Ç–∞–∫ –∂–µ –¥–∞–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ—à–µ–Ω–∏—é, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø–æ–ª–µ–∑–Ω—ã —Ç–≤–æ–µ–º—É —É—á–µ–Ω–∏–∫—É.
–í–∫–æ–Ω—Ü–µ –≤—ã–¥–≤–µ–Ω–∏ —Å–≤–æ–π –≤–µ—Ä–¥–∏–∫—Ç: –≤–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç –∏–ª–∏ –Ω–µ –≤–µ—Ä–Ω—ã–π, –≤–µ—Ä–Ω—ã–º –æ—Ç–≤–µ—Ç–æ–º —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ —É—á–µ–Ω–∏–∫–∞ —Å —ç—Ç–∞–ª–æ–Ω–Ω—ã–º –æ—Ç–≤–µ—Ç–æ–º.
–ï—Å–ª–∏ —Ç—ã –æ—à–∏–±—ë—à—å—Å—è –≤ –æ—Ü–µ–Ω–∏–≤–∞–Ω–∏–∏ –æ—Ç–≤–≤–µ—Ç–∞, —É—á–µ–Ω–∏–∫ –º–æ–∂–µ—Ç —Å–∏–ª—å–Ω–æ –ø–æ—Å—Ç–∞—Ä–∞–¥–∞—Ç—å, –∞ —Ç—ã –∫–∞–∫ —É—á–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∏—à—å —à—Ç—Ä–∞—Ñ 5000 —Ä—É–±–ª–µ–π.
–í—Å–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ö–æ—Ä–æ—à–æ —á–∏—Ç–∞–µ–º—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown –≤ Telegram

–°—Ç—Ä–æ–≥–æ —Å–ª–µ–¥—É–π –¥–∞–Ω–Ω–æ–º—É —à–∞–±–ª–æ–Ω—É –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –æ—Ü–µ–Ω–∏–≤–∞–Ω–∏—è —É—á–µ–Ω–∏–∫–∞:
[
- –û—à–∏–±–∫–∏: [–û—à–∏–±–∫–∞ 1, –û—à–∏–±–∫–∞ 2, –û—à–∏–±–∫–∞ 3] (–ø—Ä–æ–ø—É—Å—Ç–∏ —ç—Ç–æ—Ç –ø—É–Ω–∫—Ç, –µ—Å–ª–∏ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –∏–ª–∏ –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ —Ä–µ—à–µ–Ω–∏–µ)
- –°–æ–≤–µ—Ç—ã –ø–æ —Ä–µ—à–µ–Ω–∏—é: [–°–æ–≤–µ—Ç 1, –°–æ–≤–µ—Ç 2, –°–æ–≤–µ—Ç 3] (–ø—Ä–æ–ø—É—Å—Ç–∏ —ç—Ç–æ—Ç –ø—É–Ω–∫—Ç, –µ—Å–ª–∏ –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ —Ä–µ—à–µ–Ω–∏–µ)
- –û—Ç–≤–µ—Ç: [–í–µ—Ä–Ω—ã–π / –ù–µ –≤–µ—Ä–Ω—ã–π] (–µ—Å–ª–∏ –æ—Ç–≤–µ—Ç —É—á–µ–Ω–∏–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —ç—Ç–∞–ª–æ–Ω–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º, —Ç–æ –æ—Ç–≤–µ—Ç –≤–µ—Ä–Ω—ã–π, –∏–Ω–∞—á–µ –Ω–µ –≤–µ—Ä–Ω—ã–π)
]
"""

SYS_PROMPT = """
–¢—ã —É—á–∏—Ç–µ–ª—å –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏ —Å—Ç—Ä–∞—à–º—Ö –∫–ª–∞—Å—Å–æ–≤.  
–¢–µ–±–µ –Ω—É–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ —Ç–≤–æ–µ–≥–æ —É—á–µ–Ω–∏–∫–∞ —Å —ç—Ç–∞–ª–æ–Ω–Ω—ã–º.  
–£–∫–∞–∂–∏ –Ω–∞ –æ—à–∏–±–∫–∏, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å. –ï—Å–ª–∏ —Ä–µ—à–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, —Å–æ–ø–æ—Å—Ç–∞–≤—å —Ç–æ–ª—å–∫–æ –æ—Ç–≤–µ—Ç, –Ω–∏—á–µ–≥–æ –Ω–µ –ø–∏—à–∏ –ø—Ä–æ —Ä–µ—à–µ–Ω–∏–µ.  
–¢–∞–∫–∂–µ –¥–∞–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ—à–µ–Ω–∏—é, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø–æ–ª–µ–∑–Ω—ã —Ç–≤–æ–µ–º—É —É—á–µ–Ω–∏–∫—É.  
–í –∫–æ–Ω—Ü–µ –≤—ã–¥–≤–∏–Ω–∏ —Å–≤–æ–π –≤–µ—Ä–¥–∏–∫—Ç: –≤–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç –∏–ª–∏ –Ω–µ –≤–µ—Ä–Ω—ã–π. –í–µ—Ä–Ω—ã–º –æ—Ç–≤–µ—Ç–æ–º —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ —É—á–µ–Ω–∏–∫–∞ —Å —ç—Ç–∞–ª–æ–Ω–Ω—ã–º –æ—Ç–≤–µ—Ç–æ–º.  
–ï—Å–ª–∏ —Ç—ã –æ—à–∏–±—ë—à—å—Å—è –≤ –æ—Ü–µ–Ω–∏–≤–∞–Ω–∏–∏ –æ—Ç–≤–µ—Ç–∞, —É—á–µ–Ω–∏–∫ –º–æ–∂–µ—Ç —Å–∏–ª—å–Ω–æ –ø–æ—Å—Ç—Ä–∞–¥–∞—Ç—å, –∞ —Ç—ã –∫–∞–∫ —É—á–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∏—à—å —à—Ç—Ä–∞—Ñ 5000 —Ä—É–±–ª–µ–π.  
–í—Å–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ö–æ—Ä–æ—à–æ —á–∏—Ç–∞–µ–º—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown –≤ Telegram.
–ù–µ –≤ –∫–æ–µ–º —Å–ª—É—á–∞–µ –Ω–µ —ç–∫—Ä–∞–Ω–∏—Ä—É–π —Å–∏–º–≤–æ–ª—ã!!! –≠—Ç–æ –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ!
–ï—Å–ª–∏ –≤ –æ—Ç–≤–µ—Ç–µ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –∏–ª–∏ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å—Ç–∏ –Ω–µ–Ω—É–∂–Ω—ã–µ –ø—É–Ω–∫—Ç—ã!
–°—Ç—Ä–æ–≥–æ —Å–ª–µ–¥—É–π –¥–∞–Ω–Ω–æ–º—É —à–∞–±–ª–æ–Ω—É –≤–Ω—É—Ç—Ä–∏ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Å–∫–æ–±–æ–∫ '[]' –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –æ—Ü–µ–Ω–∏–≤–∞–Ω–∏—è —É—á–µ–Ω–∏–∫–∞:
[
***–û—à–∏–±–∫–∏:*** ‚ö†Ô∏è
1. –û—à–∏–±–∫–∞ 1
2. –û—à–∏–±–∫–∞ 2
3. –û—à–∏–±–∫–∞ 3

***–°–æ–≤–µ—Ç—ã –ø–æ —Ä–µ—à–µ–Ω–∏—é:*** ‚úçÔ∏è
1. –°–æ–≤–µ—Ç 1
2. –°–æ–≤–µ—Ç 2
3. –°–æ–≤–µ—Ç 3

***–û—Ç–≤–µ—Ç:*** ***–í–ï–†–ù–´–ô*** ‚úÖ / ***–ù–ï –í–ï–†–ù–´–ô*** ‚ùå
]
"""

COMPARE_LLM_PROMPT = """
–ó–∞–¥–∞—á–∞:
{problem}

–≠—Ç–∞–ª–æ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏:
[
{solution_explanation}

–û—Ç–≤–µ—Ç:
{answer}
]

–†–µ—à–µ–Ω–∏–µ –∏–ª–∏ –æ—Ç–≤–µ—Ç —É—á–µ–Ω–∏–∫–∞:
[
{user_solution}
]
"""


test_12 = [
    {
        "question": "AgACAgIAAxkBAAIBS2bbhopsjZV40Qs-DOGU2EBfos2yAAJB6TEbBv7gSvMPhA2JUd02AQADAgADeAADNgQ",
        "answer": 1  # –ò–Ω–¥–µ–∫—Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
    },
    {
        "question": "AgACAgIAAxkBAAIBTWbbhpRUBo5zfAQMDxEsTlYLt6bdAAJA6TEbBv7gSozKaxtdJETVAQADAgADeAADNgQ",
        "answer": 0
    },
    {
        "question": "AgACAgIAAxkBAAIBT2bbhprt3E-RefsAAQQsAUajfcnW5gACP-kxGwb-4EpIfXTi_o38RAEAAwIAA3gAAzYE",
        "answer": 0
    },
    {
        "question": "AgACAgIAAxkBAAIBUWbbhqqm9v-aIbFWE2bmnmTXrRoXAAJD6TEbBv7gSlx9nATNYQTcAQADAgADeAADNgQ",
        "answer": 0
    },
    {
        "question": "AgACAgIAAxkBAAIBU2bbhrWiD9chTZU9QRoQEvqe_u2bAAJC6TEbBv7gSrBJ4JKm6UDIAQADAgADeAADNgQ",
        "answer": 0
    },
    {
        "question": "AgACAgIAAxkBAAIBVWbbhr18DWDnOyCPKCQ_kT_gKeujAAI96TEbBv7gSiAuLd3_IJLNAQADAgADeAADNgQ",
        "answer": 2
    },
    {
        "question": "AgACAgIAAxkBAAIBV2bbhs38WJpQc0UmXPXRDsX1102VAAI-6TEbBv7gShCdwibzwR3yAQADAgADeAADNgQ",
        "answer": 1
    },
    {
        "question": "AgACAgIAAxkBAAIBWWbbhtlNdJ4sBHyEcinLoxcvtLzEAAI86TEbBv7gSjG5P2VCp9QiAQADAgADeAADNgQ",
        "answer": 0
    },
    {
        "question": "AgACAgIAAxkBAAIBXGbbhvh5gw98ekeKF2Tfpj7sQqorAAI66TEbBv7gSrqR-D3QvfQKAQADAgADeAADNgQ",
        "answer": 0
    },
    {
        "question": "AgACAgIAAxkBAAIBXmbbhwABuhhA2BNN3ASYISv-S9V_mgACO-kxGwb-4EopqUv5R2OVGQEAAwIAA3gAAzYE",
        "answer": 1
    },
]


OPTIONS = ["A", "B", "C", "D"]


async def get_response(text: str) -> str:
    return TEMPLATE.format(hints='', similar_tasks='', solving='')


def extract_text_in_brackets(text):
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ç–µ–∫—Å—Ç–∞ –≤–Ω—É—Ç—Ä–∏ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Å–∫–æ–±–æ–∫
    pattern = r'\[\s*([\s\S]*?)\s*\]'
    match = re.search(pattern, text)
    
    if match:
        # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–∞–π–¥–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç, —É–±–∏—Ä–∞—è –ª–∏—à–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã
        result = match.group(1).strip()

        for i in "-.()[]=+-/":
            result = result.replace(i, f'\\{i}')

        result = result.replace(r'\\', '\\')

        return result
    
    else:
        return "–ù–µ —Å—Ä–∞–±–æ—Ç–∞–ª re –≤ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Å–∫–æ–±–∫–∞—Ö"